<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STREETMOOD â€” CatÃ¡logo Premium</title>
    
    <!-- TailwindCSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
    
    <!-- AOS Animation Library -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
<style>
        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #121212;
            --accent-red: #e50914;
            --accent-red-hover: #ff1e1e;
            --text-primary: #ffffff;
            --text-secondary: #9ca3af;
            --glass: rgba(255, 255, 255, 0.04);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(180deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            color: var(--text-primary);
            min-height: 100vh;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }
        
        .product-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .product-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(229, 9, 20, 0.1) 0%, rgba(255, 30, 30, 0.05) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 0;
        }
        
        .product-card:hover::before {
            opacity: 1;
        }
        
        .product-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(229, 9, 20, 0.2), 0 0 30px rgba(229, 9, 20, 0.1);
        }
        
        .product-image {
            transition: transform 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .product-card:hover .product-image {
            transform: scale(1.1);
        }
        
        .drop-badge {
            background: linear-gradient(135deg, #e50914 0%, #ff1e1e 100%);
            animation: pulse-glow 2s infinite;
        }
        
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 10px rgba(229, 9, 20, 0.5); }
            50% { box-shadow: 0 0 20px rgba(229, 9, 20, 0.8); }
        }
        
        .modal-overlay {
            backdrop-filter: blur(8px);
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .modal-content {
            animation: slideUp 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .tagline {
            font-size: 0.95rem;
            letter-spacing: 0.05em;
            text-transform: uppercase;
            color: var(--text-secondary);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--accent-red) 0%, var(--accent-red-hover) 100%);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(229, 9, 20, 0.4);
        }
        
        .search-input {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .search-input:focus {
            background: rgba(255, 255, 255, 0.08);
            border-color: var(--accent-red);
            box-shadow: 0 0 0 3px rgba(229, 9, 20, 0.1);
        }
        
        .tab-button {
            transition: all 0.3s ease;
            position: relative;
        }
        
        .tab-button.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--accent-red);
        }
        
</style>
</head>
<body>
    <!-- Header -->
    <header class="sticky top-0 z-40 glass-effect border-b border-white/10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <div class="w-14 h-14 bg-gradient-to-br from-red-600 to-red-500 rounded-xl flex items-center justify-center font-black text-xl text-black shadow-lg">
                        SM
                    </div>
                    <div>
                        <h1 class="text-2xl font-black tracking-tight uppercase">STREETMOOD</h1>
                        <p class="tagline mt-1">Qualquer vibe, qualquer ocasiÃ£o.</p>
                    </div>
                </div>
                <button onclick="openWhatsApp()" class="btn-primary px-6 py-3 rounded-xl font-bold text-sm uppercase tracking-wide">
                    WhatsApp
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Tabs -->
        <div class="flex gap-4 mb-8 border-b border-white/10">
            <button onclick="switchTab('all')" class="tab-button active px-6 py-3 font-bold text-sm uppercase tracking-wide" data-tab="all">
                CatÃ¡logo Completo
            </button>
  </div>

        <!-- Filters -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
            <div class="relative">
                <input 
                    type="text" 
                    id="searchInput" 
                    placeholder="Pesquisar modelo..." 
                    class="search-input w-full px-4 py-3 rounded-xl text-white placeholder-gray-500 focus:outline-none"
                    oninput="filterProducts()"
                >
            </div>
            <select id="filterSelect" onchange="filterProducts()" class="search-input w-full px-4 py-3 rounded-xl text-white focus:outline-none">
                <option value="all">Todos os produtos</option>
                <option value="stock">Em Stock</option>
            </select>
            <select id="sortSelect" onchange="filterProducts()" class="search-input w-full px-4 py-3 rounded-xl text-white focus:outline-none">
                <option value="new">Mais recentes</option>
                <option value="price-asc">PreÃ§o: menor â†’ maior</option>
                <option value="price-desc">PreÃ§o: maior â†’ menor</option>
            </select>
  </div>

        <!-- Products Grid -->
        <div id="productsGrid" class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6">
            <!-- Products will be loaded here -->
        </div>

        <!-- Info Tags -->
        <div class="flex flex-wrap gap-3 mt-12 justify-center">
            <div class="glass-effect px-4 py-2 rounded-lg text-sm font-semibold">
                ðŸšš Envio grÃ¡tis
            </div>
            <div class="glass-effect px-4 py-2 rounded-lg text-sm font-semibold">
                ðŸ“¦ Caixa STREETMOOD incluÃ­da
            </div>
            <div class="glass-effect px-4 py-2 rounded-lg text-sm font-semibold">
                +5â‚¬ por caixa original
            </div>
    </div>
  </main>

    <!-- Footer -->
    <footer class="mt-16 py-8 border-t border-white/10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col md:flex-row justify-between items-center gap-4">
                <div class="text-center md:text-left">
                    <p class="font-bold text-lg mb-2">STREETMOOD</p>
                    <p class="text-gray-400 text-sm">Vibes, drops e amor ao estilo.</p>
                </div>
                <div class="flex gap-6">
                    <a href="https://instagram.com/streetm00d_" target="_blank" class="text-gray-400 hover:text-white transition-colors font-semibold">
                        Instagram
                    </a>
                    <a href="https://wa.me/351912345678" target="_blank" class="text-gray-400 hover:text-white transition-colors font-semibold">
                        WhatsApp
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Modal -->
    <div id="productModal" class="fixed inset-0 z-50 hidden items-center justify-center p-4 modal-overlay">
        <div class="absolute inset-0 bg-black/80" onclick="closeModal()"></div>
        <div class="modal-content relative bg-gray-900 rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto glass-effect border border-white/10">
            <div class="p-6">
                <!-- Modal Header -->
                <div class="flex justify-between items-start mb-6">
                    <div>
                        <h2 id="modalTitle" class="text-2xl font-black uppercase mb-2"></h2>
                        <div id="modalBadge" class="mb-2"></div>
                    </div>
                    <button onclick="closeModal()" class="text-gray-400 hover:text-white text-2xl font-bold">&times;</button>
                </div>

                <div class="grid md:grid-cols-2 gap-6">
                    <!-- Image Viewer -->
                    <div id="modalViewer" class="bg-gray-800 rounded-xl overflow-hidden min-h-[350px] flex items-center justify-center">
                        <!-- Content will be inserted here -->
</div>

                    <!-- Product Details -->
                    <div>
                        <div class="mb-4">
                            <p id="modalPrice" class="text-3xl font-black text-red-500 mb-2"></p>
                            <p id="modalTag" class="text-gray-400 text-sm mb-4"></p>
                        </div>
                        
                        <p id="modalDescription" class="text-gray-300 mb-6 leading-relaxed"></p>
                        
                        <button 
                            id="reserveBtn" 
                            onclick="reserveProduct()" 
                            class="btn-primary w-full py-4 rounded-xl font-bold text-lg uppercase tracking-wide mb-4"
                        >
                            ðŸ’¬ Reservar via WhatsApp
                        </button>
                        
                        <div class="glass-effect p-4 rounded-xl text-sm text-gray-300 space-y-2">
                            <p>âœ“ Envio grÃ¡tis â€¢ Caixa STREETMOOD incluÃ­da</p>
                            <p>âœ“ Caixa original disponÃ­vel (+5â‚¬)</p>
                            <p>âœ“ Fotos antes do envio</p>
                        </div>
                        
                        <p class="text-center text-gray-500 text-sm mt-6 font-semibold">
                            STREETMOOD â€” Qualquer vibe, qualquer ocasiÃ£o.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Products data
        // NOTE: To load all products, replace this array with the full products array from streetmood_products.js
        const products = [
            {"id": 1, "name": "Air Jordan 10 - White brown40-47", "buy_usd": 39.0, "price_eur": 90, "price_box_eur": 95, "size": "40-47", "image": "", "link": "https://www.ubzy.ru/product/air-jordan-10-white-brown40-47/", "tipo": "stock", "desc": ""},
            {"id": 2, "name": "Air Jordan 10 - White black40-47", "buy_usd": 39.0, "price_eur": 90, "price_box_eur": 95, "size": "40-47", "image": "", "link": "https://www.ubzy.ru/product/air-jordan-10-white-black40-47/", "tipo": "stock", "desc": ""},
            {"id": 3, "name": "Air Jordan 10 - White black red40-47", "buy_usd": 39.0, "price_eur": 90, "price_box_eur": 95, "size": "40-47", "image": "", "link": "https://www.ubzy.ru/product/air-jordan-10-white-black-red40-47/", "tipo": "stock", "desc": ""},
            {"id": 4, "name": "Air Jordan 10 - White black grass green40-47", "buy_usd": 39.0, "price_eur": 90, "price_box_eur": 95, "size": "40-47", "image": "", "link": "https://www.ubzy.ru/product/air-jordan-10-white-black-grass-green40-47/", "tipo": "stock", "desc": ""},
            {"id": 5, "name": "Air Jordan 10 - shadow40-47", "buy_usd": 39.0, "price_eur": 90, "price_box_eur": 95, "size": "40-47", "image": "", "link": "https://www.ubzy.ru/product/air-jordan-10-shadow40-47/", "tipo": "stock", "desc": ""},
            {"id": 6, "name": "Air Jordan 10 - owl40-47", "buy_usd": 39.0, "price_eur": 90, "price_box_eur": 95, "size": "40-47", "image": "", "link": "https://www.ubzy.ru/product/air-jordan-10-owl40-47/", "tipo": "stock", "desc": ""},
            {"id": 7, "name": "Air Jordan 10 - New white black40-47", "buy_usd": 39.0, "price_eur": 90, "price_box_eur": 95, "size": "40-47", "image": "", "link": "https://www.ubzy.ru/product/air-jordan-10-new-white-black40-47/", "tipo": "stock", "desc": ""},
            {"id": 8, "name": "Air Jordan 10 - Miami Super Bowl40-47", "buy_usd": 39.0, "price_eur": 90, "price_box_eur": 95, "size": "40-47", "image": "", "link": "https://www.ubzy.ru/product/air-jordan-10-miami-super-bowl40-47/", "tipo": "stock", "desc": ""},
            {"id": 9, "name": "Air Jordan 10 - mandarin duck40-47", "buy_usd": 39.0, "price_eur": 90, "price_box_eur": 95, "size": "40-47", "image": "", "link": "https://www.ubzy.ru/product/air-jordan-10-mandarin-duck40-47/", "tipo": "stock", "desc": ""},
            {"id": 10, "name": "Air Jordan 10 - grey cement40-47", "buy_usd": 39.0, "price_eur": 90, "price_box_eur": 95, "size": "40-47", "image": "", "link": "https://www.ubzy.ru/product/air-jordan-10-grey-cement40-47/", "tipo": "stock", "desc": ""},
            {"id": 11, "name": "Air Jordan 10 - Chicago40-47", "buy_usd": 39.0, "price_eur": 90, "price_box_eur": 95, "size": "40-47", "image": "", "link": "https://www.ubzy.ru/product/air-jordan-10-chicago40-47/", "tipo": "stock", "desc": ""},
            {"id": 12, "name": "Air Jordan 10 - bull40-47", "buy_usd": 39.0, "price_eur": 90, "price_box_eur": 95, "size": "40-47", "image": "", "link": "https://www.ubzy.ru/product/air-jordan-10-bull40-47/", "tipo": "stock", "desc": ""},
            {"id": 13, "name": "Air Jordan 10 - black white red40-47", "buy_usd": 39.0, "price_eur": 90, "price_box_eur": 95, "size": "40-47", "image": "", "link": "https://www.ubzy.ru/product/air-jordan-10-black-white-red40-47/", "tipo": "stock", "desc": ""},
            {"id": 14, "name": "Air Jordan 10 - black white blue40-47", "buy_usd": 39.0, "price_eur": 90, "price_box_eur": 95, "size": "40-47", "image": "", "link": "https://www.ubzy.ru/product/air-jordan-10-black-white-blue40-47/", "tipo": "stock", "desc": ""}
        ];
        
        // TODO: Replace this array with the full products list from streetmood_products.js

        let currentProducts = products;
        let activeTab = 'all';
        let currentProduct = null;

        // Initialize
        AOS.init({
            duration: 800,
            easing: 'ease-out-cubic',
            once: true
        });

        // Available images mapping (built from imagens_produtos folder)
        // This creates a normalized mapping of product names to image paths
        const imageMap = {
            // Normalize function to clean names for matching
            normalize: function(name) {
                return name
                    .toLowerCase()
                    .replace(/['"]/g, '')
                    .replace(/[()]/g, '')
                    .replace(/\s+/g, ' ')
                    .trim();
            },
            
            // Get image path for a product name
            getImage: function(productName) {
                // Remove size info and extra text from product name (e.g., "40-47", "555088-134")
                const cleanProductName = productName
                    .replace(/\d{1,2}-\d{1,2}/g, '') // Remove size ranges like "40-47"
                    .replace(/\d{6,}/g, '') // Remove long code numbers
                    .replace(/^\d+$/, '') // Remove standalone numbers
                    .trim();
                
                const normalized = this.normalize(cleanProductName);
                
                // Try exact match first
                for (const [imgName, path] of Object.entries(this.mapping)) {
                    if (this.normalize(imgName) === normalized) {
                        return path;
                    }
                }
                
                // Try direct name match (without normalization)
                for (const [imgName, path] of Object.entries(this.mapping)) {
                    if (imgName === cleanProductName || imgName === productName) {
                        return path;
                    }
                }
                
                // Try partial match (contains) - check if product name contains image name or vice versa
                for (const [imgName, path] of Object.entries(this.mapping)) {
                    const imgNormalized = this.normalize(imgName);
                    if (imgNormalized.includes(normalized) || normalized.includes(imgNormalized)) {
                        return path;
                    }
                }
                
                // Try matching key words (remove common words and numbers)
                const nameWords = normalized.split(/\s+/).filter(p => 
                    p.length > 2 && 
                    !['retro', 'air', 'jordan', 'jordans', 'nike'].includes(p.toLowerCase())
                );
                
                for (const [imgName, path] of Object.entries(this.mapping)) {
                    const imgNormalized = this.normalize(imgName);
                    const imgWords = imgNormalized.split(/\s+/).filter(p => 
                        p.length > 2 && 
                        !['retro', 'air', 'jordan', 'jordans', 'nike'].includes(p.toLowerCase())
                    );
                    
                    // Check if key words match
                    const matches = nameWords.filter(p => 
                        imgWords.some(ip => ip.includes(p) || p.includes(ip) || ip === p)
                    );
                    
                    // If at least 2 key words match, or if most words match
                    if (matches.length >= Math.min(2, nameWords.length) || 
                        (nameWords.length > 0 && matches.length / nameWords.length >= 0.6)) {
                        return path;
                    }
                }
                
                return null;
            },
            
            // Image mapping (will be populated dynamically)
            mapping: {}
        };
        
        // Build image mapping from ALL available images in imagens_produtos folder
        // This list includes ALL 66 unique images found in the folder (_1.jpg versions)
        const availableImages = [
            "Air Jordan 312_1.jpg",
            "Air Jordan 4 Retro_1.jpg",
            "Air Jordans 1 CD4487-100_1.jpg",
            "Air Jordans 1 High University Blue 555088-134_1.jpg",
            "AIR JORDANS 1 HIGH ZOOM \"Racer Blue\" CK6637-104_1.jpg",
            "AIR JORDANS 1 LOW \"Mystic Green\"553558-113_1.jpg",
            "Air Jordans 1 Mid (GS)555112-500_1.jpg",
            "Air Jordans 1 Mid GS \"Light Smoke Grey\"554724-092_1.jpg",
            "Air Jordans 1 Mid SE 852542-400_1.jpg",
            "Air Jordans 1 MID SE \"South Beach\"852542-306_1.jpg",
            "Air Jordans 1 Mid 'Candy' 554725-083_1.jpg",
            "Air Jordans 1 Mid \"Black Cone\" 554724-062_1.jpg",
            "Air Jordans 1 Mid \"Chicago Black Toe\" 554724-069_1.jpg",
            "Air Jordans 1 Mid \"Lakers Top 3\"852542-005_1.jpg",
            "Air Jordans 1 Mid \"Multicolor\" 554724-125_1.jpg",
            "Air Jordans 1 MID \"Top 3\" 554724-124_1.jpg",
            "Air Jordans 1 Retro High CN8607-002_1.jpg",
            "Air Jordans 1 Retro High Co.JP 'Midnight Navy' DC1788-100_1.jpg",
            "Air Jordans 1 Retro High OG GS \"Crimson Tint\" 555088-081_1.jpg",
            "Air Jordans 11 Retro 'Gamma Blue' 378038-006_1.jpg",
            "Air Jordans 3 Retro 'Red Cement' CT8532-104_1.jpg",
            "Air Jordans 3 'Lazer Orange' CK9246-108_1.jpg",
            "Air Jordans 4 Bred 408452-060_1.jpg",
            "Air Jordans 4 Retro SP 'Union â€“ Guava Ice DC9533-009_1.jpg",
            "Air Jordans 4 Retro 'University Blue' CT8527-400_1.jpg",
            "Air Jordans 4 Retro \"White Oreo\" CT8527-100_1.jpg",
            "Air Jordans 4 Retro_1.jpg",
            "Air Jordans 4 'Black Cat' CU1110-010_1.jpg",
            "Air Jordans 4 'Fire Red' DC7770-160_1.jpg",
            "Air Jordans 4 'Off Noir' DC9533-001_1.jpg",
            "Air Jordans 4 'PSG' CZ6509-100_1.jpg",
            "Air Jordans 4 'Pure Money' 308497-100_1.jpg",
            "Jordan 13 Retro Black White Gum_1.jpg",
            "Jordan 13 Retro Brave Blue_1.jpg",
            "Jordan 13 Retro French Blue_1.jpg",
            "Jordan 4 Retro Cool Grey (2019)_1.jpg",
            "Jordan 4 Retro Flight Nostalgia_1.jpg",
            "Jordan 4 Retro Lightning (2021)_1.jpg",
            "Jordan 4 Retro Metallic Green_1.jpg",
            "Jordan 4 Retro Metallic Red_1.jpg",
            "Jordan 4 Retro Motorsports (2017)_1.jpg",
            "Jordan 4 Retro SE 95 Neon_1.jpg",
            "Jordan 4 Retro Thunder (2012)_1.jpg",
            "Jordan Air Jordan 3 Barely Grape Pink Purple_1.jpg",
            "Jordan Air Jordan 3 Retro Black Gold Black gold_1.jpg",
            "Jordan Air Jordan 3 retro true blue White Blue_1.jpg",
            "Jordan Air Jordan 3 tinker black and white_1.jpg",
            "Jordans 1 Mid White Black Light Arctic Pink 555112-103_1.jpg",
            "Jordans 1 Retro High \"Homage To Home\" 555088-001_1.jpg",
            "Nike ACG Mountain Fly 2 Black_1.jpg",
            "Nike ACG Mountain Fly 2 Gerry_1.jpg",
            "Nike ACG Mountain Fly 2_1.jpg",
            "Nike Air Jordan 5_1.jpg",
            "Nike Air Jordan 6 Retro Black Infrared_1.jpg",
            "Nike Air Jordan 6 Retro Carmine (2014)_1.jpg",
            "Nike Air Jordan 6 Retro Chrome Metallic Silver_1.jpg",
            "Nike Air Jordan 6 Retro DMP 2020 (GS)_1.jpg",
            "Nike Air Jordan 6 Retro Midnight Navy (2000)_1.jpg",
            "Nike Air Jordan 6 Retro UNC_1.jpg",
            "Nike Jordan Stadium 90 Gris_1.jpg",
            "Nike Jordan Stadium 90 White Amarillo de hoja caduca_1.jpg",
            "Nike Jordan Stadium 90 White black_1.jpg",
            "Nike Jordan Stadium 90 White Morado_1.jpg",
            "Nike Jordan Stadium 90 White pink_1.jpg",
            "Nike Jordan Stadium 90 White red_1.jpg"
        ];
        
        // Build the mapping - creates base name -> image path mapping
        availableImages.forEach(imgName => {
            // Remove _1.jpg or _2.jpg to get base name (product name)
            const baseName = imgName.replace(/_\d\.jpg$/, '');
            // Prefer _1.jpg if both exist, otherwise use what's available
            imageMap.mapping[baseName] = `imagens_produtos/${imgName}`;
        });
        
        // Map product images - try to find image by product name
        function getProductImage(product) {
            // First check if product has image path and it's valid
            if (product.image && product.image !== '' && !product.image.includes('Air Jordan 312_1.jpg')) {
                // If image path starts with assets/, use it as is
                if (product.image.startsWith('assets/')) {
                    return product.image;
                }
                // If already has imagens_produtos/, use it
                if (product.image.startsWith('imagens_produtos/')) {
                    return product.image;
                }
                // Otherwise, prepend imagens_produtos/
                return `imagens_produtos/${product.image}`;
            }
            
            // Try to find image by matching product name
            const matchedImage = imageMap.getImage(product.name);
            if (matchedImage) {
                return matchedImage;
            }
            
            // Try direct match with _1.jpg suffix
            const directMatch = `imagens_produtos/${product.name}_1.jpg`;
            // Check if this exists in our mapping
            for (const [baseName, path] of Object.entries(imageMap.mapping)) {
                if (baseName === product.name || baseName.replace(/\s+/g, ' ') === product.name.replace(/\s+/g, ' ')) {
                    return path;
                }
            }
            
            // Return null to trigger placeholder
            return null;
        }
        
        // Check if image exists before returning
        function checkImageExists(imagePath) {
            if (!imagePath) return null;
            const img = new Image();
            img.src = imagePath;
            // Return path if image exists, otherwise null
            return imagePath;
        }
        
        // Function to show placeholder for products without image
        function createPlaceholderHTML(productName) {
            return `
                <div class="flex flex-col items-center justify-center p-6 text-center h-full">
                    <div class="text-7xl mb-4 animate-pulse">ðŸ‘Ÿ</div>
                    <div class="text-2xl mb-2 font-black text-red-500 uppercase">STREETMOOD</div>
                    <div class="text-gray-400 text-sm mb-2">Imagem em atualizaÃ§Ã£o</div>
                    <div class="text-gray-500 text-xs max-w-xs">Em breve terÃ¡s acesso<br>Ã  visualizaÃ§Ã£o completa deste modelo</div>
                </div>
            `;
        }

        // Calculate price based on buy_usd
        function calculatePrice(buyUsd) {
            if (buyUsd <= 30) return 70;
            if (buyUsd <= 45) return 90;
            if (buyUsd >= 55) return 115; // 110-120 range, using 115
            return 90; // default
        }

        // Render product card
        function renderProductCard(product) {
            const image = getProductImage(product);
            const badge = '<span class="glass-effect inline-block px-3 py-1 rounded-full text-xs font-semibold text-gray-300">Em Stock</span>';
            const hasImage = image !== null;
            
            let imageHTML = '';
            if (hasImage) {
                imageHTML = `<img src="${image}" 
                                  alt="${product.name}" 
                                  class="product-image w-full h-full object-contain"
                                  onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                           <div class="hidden absolute inset-0 flex flex-col items-center justify-center p-4 text-center">
                               <div class="text-5xl mb-2 animate-pulse">ðŸ‘Ÿ</div>
                               <div class="text-xs text-gray-400">Imagem em atualizaÃ§Ã£o</div>
                           </div>`;
  } else {
                imageHTML = `<div class="flex flex-col items-center justify-center p-4 text-center h-full">
                                <div class="text-5xl mb-2 animate-pulse">ðŸ‘Ÿ</div>
                                <div class="text-xs text-gray-400">Imagem em atualizaÃ§Ã£o</div>
                            </div>`;
            }
            
            return `
                <div class="product-card glass-effect rounded-2xl p-4 cursor-pointer" 
                     onclick="openModal(${product.id})"
                     data-aos="fade-up"
                     data-name="${product.name.toLowerCase()}"
                     data-price="${product.price_eur}"
                     data-type="${product.tipo}">
                    <div class="relative mb-4 bg-gray-800 rounded-xl overflow-hidden h-48 flex items-center justify-center">
                        ${imageHTML}
                    </div>
                    <div class="space-y-2">
                        <h3 class="font-bold text-sm uppercase leading-tight line-clamp-2">${product.name}</h3>
                        <div class="flex justify-between items-center">
                            <p class="text-red-500 font-black text-lg">${product.price_eur}â‚¬</p>
                            ${badge}
                        </div>
                        <button class="w-full mt-2 py-2 glass-effect rounded-lg text-sm font-semibold hover:bg-white/10 transition-colors">
                            Ver mais
                        </button>
                    </div>
                </div>
            `;
        }

        // Render products grid
        function renderProducts() {
            const grid = document.getElementById('productsGrid');
            if (currentProducts.length === 0) {
                grid.innerHTML = '<div class="col-span-full text-center py-12 text-gray-400">Nenhum produto encontrado.</div>';
                return;
            }
            
            grid.innerHTML = currentProducts.map(renderProductCard).join('');
            AOS.refresh();
        }

        // Filter products
        function filterProducts() {
            const search = document.getElementById('searchInput').value.toLowerCase();
            const filter = document.getElementById('filterSelect').value;
            const sort = document.getElementById('sortSelect').value;
            
            let filtered = products;
            
            // Search filter
            if (search) {
                filtered = filtered.filter(p => 
                    p.name.toLowerCase().includes(search) ||
                    (p.size && p.size.toLowerCase().includes(search))
                );
            }
            
            // Type filter
            if (filter === 'stock') {
                filtered = filtered.filter(p => p.tipo === 'stock');
            }
            
            // Sort
            if (sort === 'price-asc') {
                filtered.sort((a, b) => a.price_eur - b.price_eur);
            } else if (sort === 'price-desc') {
                filtered.sort((a, b) => b.price_eur - a.price_eur);
            }
            
            currentProducts = filtered;
            renderProducts();
        }

        // Switch tab
        function switchTab(tab) {
            activeTab = tab;
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active', 'text-white');
                btn.classList.add('text-gray-400');
            });
            document.querySelector(`[data-tab="${tab}"]`).classList.add('active', 'text-white');
            document.querySelector(`[data-tab="${tab}"]`).classList.remove('text-gray-400');
            filterProducts();
        }

        // Open modal
        function openModal(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            currentProduct = product;
            const modal = document.getElementById('productModal');
            const image = getProductImage(product);
            
            // Set modal content
            document.getElementById('modalTitle').textContent = product.name + (product.size ? ` â€¢ T:${product.size}` : '');
            document.getElementById('modalPrice').textContent = `${product.price_eur}â‚¬`;
            document.getElementById('modalTag').textContent = 'DisponÃ­vel em stock';
            document.getElementById('modalDescription').textContent = product.desc || 
                `Produto premium importado. Envio grÃ¡tis. Caixa STREETMOOD incluÃ­da. Caixa original disponÃ­vel (+5â‚¬).`;
            
            document.getElementById('modalBadge').innerHTML = '';
            
            // Set viewer with placeholder if no image
            const viewer = document.getElementById('modalViewer');
            viewer.innerHTML = '';
            
            // Check if image exists or use placeholder
            const img = new Image();
            img.onload = function() {
                viewer.innerHTML = `
                    <img src="${image}" 
                         alt="${product.name}" 
                         class="max-w-full max-h-full object-contain rounded-xl">
                `;
            };
            img.onerror = function() {
                // Creative placeholder for products without image
                viewer.innerHTML = `
                    <div class="flex flex-col items-center justify-center p-8 text-center">
                        <div class="text-6xl mb-4">ðŸ‘Ÿ</div>
                        <div class="text-4xl mb-2 font-black text-red-500">STREETMOOD</div>
                        <div class="text-gray-400 text-sm mb-4">Imagem em atualizaÃ§Ã£o</div>
                        <div class="text-gray-500 text-xs">Em breve terÃ¡s acesso<br>Ã  visualizaÃ§Ã£o completa deste modelo</div>
                    </div>
                `;
            };
            img.src = image;
            
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            document.body.style.overflow = 'hidden';
        }

        // Close modal
        function closeModal() {
            const modal = document.getElementById('productModal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
            document.body.style.overflow = '';
        }

        // Reserve product
        function reserveProduct() {
            if (!currentProduct) return;
            
            const message = encodeURIComponent(
                `Quero reservar o ${currentProduct.name} disponÃ­vel no drop STREETMOOD.`
            );
            const whatsappUrl = `https://wa.me/351912345678?text=${message}`;
            window.open(whatsappUrl, '_blank');
        }

        // Open WhatsApp
        function openWhatsApp() {
            window.open('https://wa.me/351912345678', '_blank');
        }

        // Close modal on ESC
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeModal();
        });

        // Initial render
        renderProducts();
</script>
</body>
</html>
